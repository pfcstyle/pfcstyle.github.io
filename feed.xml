<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.9.0">Jekyll</generator><link href="https://pfcstyle.github.io/feed.xml" rel="self" type="application/atom+xml" /><link href="https://pfcstyle.github.io/" rel="alternate" type="text/html" /><updated>2021-02-20T11:51:01+08:00</updated><id>https://pfcstyle.github.io/feed.xml</id><title type="html">01手记</title><subtitle>Will的个人手记</subtitle><author><name>Yawei Wang</name></author><entry><title type="html"></title><link href="https://pfcstyle.github.io/2021/02/20/2021-02-06-Future-Technology/" rel="alternate" type="text/html" title="" /><published>2021-02-20T11:51:01+08:00</published><updated>2021-02-20T11:51:01+08:00</updated><id>https://pfcstyle.github.io/2021/02/20/2021-02-06-Future-Technology</id><content type="html" xml:base="https://pfcstyle.github.io/2021/02/20/2021-02-06-Future-Technology/">&lt;p&gt;Prof. Gilbert: Making use of this technology will &lt;strong&gt;instantly benefit&lt;/strong&gt; some of the poorest people on Earth. Drought-resistant crops will &lt;strong&gt;solve&lt;/strong&gt; the problem of hunger in the developing world.&lt;/p&gt;

&lt;p&gt;Prof. Gilbert: Fine-tuning the genes of mosquitos so that they spread vaccines instead of malaria will &lt;strong&gt;eliminate&lt;/strong&gt; many terrible diseases.&lt;/p&gt;

&lt;p&gt;Prof. Gilbert: And, closer to home, gene screening will &lt;strong&gt;enable&lt;/strong&gt; us to find and fix health problems before a person is even born.&lt;/p&gt;

&lt;p&gt;Prof. Gilbert: &lt;strong&gt;Who wouldn’t want the ability to prevent their child from developing cancer?&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Prof. Gilbert: Being able to change the DNA of plants, animals and ourseleves will &lt;strong&gt;trigger a chain reaction&lt;/strong&gt; of technological advancements, all of which will help us to &lt;strong&gt;overcome&lt;/strong&gt; the challenges the future will throw at us.&lt;/p&gt;

&lt;p&gt;A: But not all the experts are so optimistic.&lt;/p&gt;

&lt;p&gt;A: Professor Goldman, fro Queen’s College, is more cautionary.&lt;/p&gt;

&lt;p&gt;Prof. Goldman: This is &lt;strong&gt;untested technology&lt;/strong&gt;, and I’d &lt;strong&gt;warn against&lt;/strong&gt; &lt;strong&gt;taking a leap into&lt;/strong&gt; the unknown Manipulating DNA for our benefit really is ‘&lt;strong&gt;Playing God&lt;/strong&gt;’, and could &lt;strong&gt;come back to haunt us&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Prof. Goldman: Imagine we genetically engineer some crops and the changes &lt;strong&gt;lead to&lt;/strong&gt; undesirable results; those changes might be &lt;strong&gt;impossible to reverse&lt;/strong&gt;, and have a &lt;strong&gt;disastrous&lt;/strong&gt; effect on the environment.&lt;/p&gt;

&lt;p&gt;Prof. Goldman: It’s a &lt;strong&gt;slippery slope&lt;/strong&gt;, with &lt;strong&gt;serious consequences&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Prof. Goldman: Once we start making changes to human DNA, &lt;strong&gt;who knows what terrible results it could have on our health in the future?&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Prof. Goldman: We really shouldn’t be &lt;strong&gt;playing around&lt;/strong&gt; with technology we don’t fully understand yes.&lt;/p&gt;</content><author><name>Yawei Wang</name></author></entry><entry><title type="html">Communicating Clearly</title><link href="https://pfcstyle.github.io/2021/02/20/communicating-clearly/" rel="alternate" type="text/html" title="Communicating Clearly" /><published>2021-02-20T00:00:00+08:00</published><updated>2021-02-20T00:00:00+08:00</updated><id>https://pfcstyle.github.io/2021/02/20/communicating-clearly</id><content type="html" xml:base="https://pfcstyle.github.io/2021/02/20/communicating-clearly/">&lt;h1 id=&quot;example&quot;&gt;Example&lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;A po’boy
    &lt;ol&gt;
      &lt;li&gt;Let’s have a po’boy for launch!&lt;/li&gt;
      &lt;li&gt;A po’boy? Is that a kind of sandwich?&lt;/li&gt;
      &lt;li&gt;Yes, it’s a traditional submarine sandwich.&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;key-grammar&quot;&gt;Key grammar&lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;It’s a &lt;strong&gt;way of greeting&lt;/strong&gt; someone, commonly used in Japan.&lt;/li&gt;
  &lt;li&gt;It’s &lt;strong&gt;what&lt;/strong&gt; you need &lt;strong&gt;if&lt;/strong&gt; you want to travel to another country.&lt;/li&gt;
  &lt;li&gt;It’s &lt;strong&gt;kind of&lt;/strong&gt; a dog, but it’s a little bigger and lives in the wild.&lt;/li&gt;
  &lt;li&gt;It’s &lt;strong&gt;the way you feel&lt;/strong&gt; when you do something wrong and feel bad about it.&lt;/li&gt;
  &lt;li&gt;It’s &lt;strong&gt;where&lt;/strong&gt; you can go to play card games and win money.&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;dialogue&quot;&gt;Dialogue&lt;/h1&gt;

&lt;ol&gt;
  &lt;li&gt;Frances: Yeah, I’m kind of nervous about my first day.&lt;/li&gt;
  &lt;li&gt;Do you have any idea what it will be like?&lt;/li&gt;
  &lt;li&gt;Martin: Well, because you’re an overseas student I’m not sure, but I think you’ll probably start off with a powhiri in the morning, and then youu can go for walk around campus after lunch.&lt;/li&gt;
  &lt;li&gt;Frances: Oh yeah, my agent told me about that, but &lt;strong&gt;what exactly&lt;/strong&gt; is a powhiri?&lt;/li&gt;
  &lt;li&gt;Martin: It’s a &lt;strong&gt;kind of&lt;/strong&gt; welcoming ceremony with speeches, dancing, singing, that kind of thing.&lt;/li&gt;
  &lt;li&gt;It can be a little intimidating at first, but just follow the instructions and I’m sure you’ll be fine.&lt;/li&gt;
  &lt;li&gt;Frances: And where will that be held?&lt;/li&gt;
  &lt;li&gt;Martin: Oh they always hold that at the marae.&lt;/li&gt;
  &lt;li&gt;Frances: The marae? &lt;strong&gt;Is that a kind of church&lt;/strong&gt;?&lt;/li&gt;
  &lt;li&gt;Martin: More of a town hall, I guess.&lt;/li&gt;
  &lt;li&gt;It’s where people go to perform ceremonies, have meetings, or even do some crafts or community activities.&lt;/li&gt;
  &lt;li&gt;Frances: Well, I’m looking forward to checking that out.&lt;/li&gt;
  &lt;li&gt;Martin: But, I would just say be careful about how you behave there.&lt;/li&gt;
  &lt;li&gt;In New Zealand we have this idea of mana- it’s kind of like a source of authority.&lt;/li&gt;
  &lt;li&gt;And that’s really important on the marae.&lt;/li&gt;
  &lt;li&gt;Frances: So &lt;strong&gt;it’s like&lt;/strong&gt; a law?&lt;/li&gt;
  &lt;li&gt;Martin: Hmm, &lt;strong&gt;not really&lt;/strong&gt;, it’s more spiritual.&lt;/li&gt;
  &lt;li&gt;It’s &lt;strong&gt;a way of showing&lt;/strong&gt; respect to a special person or place&lt;/li&gt;
  &lt;li&gt;Frances: So will I have to do anything special?&lt;/li&gt;
  &lt;li&gt;Martin: Oh, no, for the powhiri it’s just basic courtesy stuff really.&lt;/li&gt;
  &lt;li&gt;Turn your phone off, stay quiet while they’re giving the speeches, you know, don’t wander off, that kind of thing.&lt;/li&gt;
  &lt;li&gt;Frances: Well, my agent told me we’d have guides, so I guess I’ll just do what they say.&lt;/li&gt;
  &lt;li&gt;Martin: Yeah, don’t worry, I’m sure you’ll have a great time!&lt;/li&gt;
&lt;/ol&gt;</content><author><name>Yawei</name></author><category term="English" /><summary type="html">Example</summary></entry><entry><title type="html">Android平台JS引擎对比</title><link href="https://pfcstyle.github.io/2021/02/19/compare-v8-webview-duktape-android/" rel="alternate" type="text/html" title="Android平台JS引擎对比" /><published>2021-02-19T00:00:00+08:00</published><updated>2021-02-19T00:00:00+08:00</updated><id>https://pfcstyle.github.io/2021/02/19/compare-v8-webview-duktape-android</id><content type="html" xml:base="https://pfcstyle.github.io/2021/02/19/compare-v8-webview-duktape-android/">&lt;p&gt;公司准备推出一个具备类似微信小程序的Mobile平台类APP, 经过调研，小程序架构都是渲染层与逻辑层分离的（小程序技术单开文章进行分析），而逻辑层其实就是一个JS引擎，那么JS引擎的选择就显得至关重要。因此，特别对目前Android平台上比较流行的JS引擎做一个对比。&lt;/p&gt;

&lt;h1 id=&quot;比较对象&quot;&gt;比较对象&lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/evgenyneu/js-evaluator-for-android&quot;&gt;js-evaluator-for-android&lt;/a&gt;: 对native android webview的封装&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/eclipsesource/J2V8&quot;&gt;J2V8&lt;/a&gt;: 对Google V8引擎做的java封装&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/cashapp/duktape-android&quot;&gt;duktape-android&lt;/a&gt;:基于Duktape JS引擎做的封装&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;测试条目&quot;&gt;测试条目&lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;初始化：循环初始化创建各个JS引擎，比较初始化效率&lt;/li&gt;
  &lt;li&gt;循环：循环执行字符串比较，对比执行效率&lt;/li&gt;
  &lt;li&gt;加载：加载一个大小为174k的json文件，比较加载效率&lt;/li&gt;
  &lt;li&gt;模型：执行一个复杂的计算模型，对比执行效率&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;坑点：js-evaluator-for-android是懒加载，在初始化时没有做任何事情，只有当执行js时才会真正初始化webview，而这也会导致后续所有的测试都不准确。因此，在初始化测试时，需要手动调用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;getWebViewWrapper&lt;/code&gt;并计入初始化时间；在进行其他测试时，也都需要手动调用&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;getWebViewWrapper&lt;/code&gt;之后再开始执行。&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;完整测试代码在&lt;a href=&quot;https://github.com/pfcstyle/jsperformance&quot;&gt;Github&lt;/a&gt;&lt;/p&gt;

&lt;h1 id=&quot;测试结果&quot;&gt;测试结果&lt;/h1&gt;

&lt;p&gt;&lt;img src=&quot;../img/post/2021-02-19/compare-result.png&quot; alt=&quot;result&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;对比总结&quot;&gt;对比总结&lt;/h1&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt; &lt;/th&gt;
      &lt;th&gt;优点&lt;/th&gt;
      &lt;th&gt;缺点&lt;/th&gt;
      &lt;th&gt;大小(默认全ABI)&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;Webview&lt;/td&gt;
      &lt;td&gt;没有依赖，不增加额外大小&lt;/td&gt;
      &lt;td&gt;效率低，不能执行大JS代码（大于1M）&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;J2V8&lt;/td&gt;
      &lt;td&gt;效率最高，使用方便&lt;/td&gt;
      &lt;td&gt;初始化较慢，对于apk大小增幅较大，目前仅有x64,x86,armv7和arm64v8类型ABI&lt;/td&gt;
      &lt;td&gt;92M&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;Duktape&lt;/td&gt;
      &lt;td&gt;初始化快，体积小，具备全平台类型ABI&lt;/td&gt;
      &lt;td&gt;运行较J2V8慢&lt;/td&gt;
      &lt;td&gt;2.45M&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;</content><author><name>Yawei</name></author><category term="Android" /><summary type="html">公司准备推出一个具备类似微信小程序的Mobile平台类APP, 经过调研，小程序架构都是渲染层与逻辑层分离的（小程序技术单开文章进行分析），而逻辑层其实就是一个JS引擎，那么JS引擎的选择就显得至关重要。因此，特别对目前Android平台上比较流行的JS引擎做一个对比。</summary></entry><entry><title type="html">What I read</title><link href="https://pfcstyle.github.io/2021/02/19/what-i-read/" rel="alternate" type="text/html" title="What I read" /><published>2021-02-19T00:00:00+08:00</published><updated>2021-02-19T00:00:00+08:00</updated><id>https://pfcstyle.github.io/2021/02/19/what-i-read</id><content type="html" xml:base="https://pfcstyle.github.io/2021/02/19/what-i-read/">&lt;h1 id=&quot;dialogue&quot;&gt;Dialogue&lt;/h1&gt;

&lt;ol&gt;
  &lt;li&gt;Chen: Hey Harry, I was reading this book on English history that you told me about the other day and I was wondering-what legends are there in England?&lt;/li&gt;
  &lt;li&gt;Harry: Well, I can think of one really famous one.&lt;/li&gt;
  &lt;li&gt;There are many versions of this story and it’s set hundreds of years ago.&lt;/li&gt;
  &lt;li&gt;They’ve even made a few films about it.&lt;/li&gt;
  &lt;li&gt;Chen: Yeah? Okay, go for it.&lt;/li&gt;
  &lt;li&gt;Harry: So, &lt;strong&gt;there’s this&lt;/strong&gt; guy called Robin Hood.&lt;/li&gt;
  &lt;li&gt;He’s this amazing archer who lives in a place called Sherwood Forest.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;Anyway&lt;/strong&gt;, the rightful king of England at the time, Richard, goes off to war, and the evil King John, rules England in his place.&lt;/li&gt;
  &lt;li&gt;He gets this other guy, the Sheriff of Nottingham to help him get more money from the poor.&lt;/li&gt;
  &lt;li&gt;The Sheriff is also a bad guy in the story and he raises taxes so that he can make as much money as possible from the poor people.&lt;/li&gt;
  &lt;li&gt;Chen: Ah, think I may have heard this story. Carry on.&lt;/li&gt;
  &lt;li&gt;Harry: &lt;strong&gt;Basically&lt;/strong&gt;, the poor people in the land find it difficult to survive as all their money’s been taken in the Sheriff’s taxes, you know?&lt;/li&gt;
  &lt;li&gt;So, &lt;strong&gt;one day&lt;/strong&gt; Robin thinks to himself “I need to do something here”, so, with a group of guys known as his Merry Men he starts to steal from the rich and give to the poor.&lt;/li&gt;
  &lt;li&gt;He sounds &lt;strong&gt;like&lt;/strong&gt; a bad guy, right?&lt;/li&gt;
  &lt;li&gt;Well &lt;strong&gt;it turns out&lt;/strong&gt; that he’s the hero of the story.&lt;/li&gt;
  &lt;li&gt;Chen: Okay, so what happens next?&lt;/li&gt;
  &lt;li&gt;Harry: &lt;strong&gt;To cut a long story short&lt;/strong&gt;, the Sheriff of Nottingham tries to catch Robin Hood and offers anyone who helps him a big reward&lt;/li&gt;
  &lt;li&gt;This Robin Hood guy, however, is too good for him and he ends up defeating the Sheriff and giving the poor back their money.&lt;/li&gt;
  &lt;li&gt;&lt;strong&gt;In the end&lt;/strong&gt;, the rightful King, King Richard, returns to Sherwood Forest and peace and order are restored in the land.&lt;/li&gt;
  &lt;li&gt;You know Chen, I don’t think I know any legends in China, but I guess there must be loads…&lt;/li&gt;
  &lt;li&gt;Chen: Oh yeah. I can think of four in particular…&lt;/li&gt;
&lt;/ol&gt;</content><author><name>Yawei</name></author><category term="English" /><summary type="html">Dialogue</summary></entry><entry><title type="html">Solving problem</title><link href="https://pfcstyle.github.io/2021/02/09/solving-problems-dealing-with-life-changes/" rel="alternate" type="text/html" title="Solving problem" /><published>2021-02-09T00:00:00+08:00</published><updated>2021-02-09T00:00:00+08:00</updated><id>https://pfcstyle.github.io/2021/02/09/solving-problems-dealing-with-life-changes</id><content type="html" xml:base="https://pfcstyle.github.io/2021/02/09/solving-problems-dealing-with-life-changes/">&lt;h1 id=&quot;key-vocabulary&quot;&gt;Key vocabulary&lt;/h1&gt;

&lt;ol&gt;
  &lt;li&gt;Don’t let negative people &lt;strong&gt;get in the way&lt;/strong&gt; of your dream - if you really want it, go for it.&lt;/li&gt;
  &lt;li&gt;Their marriage has been &lt;strong&gt;in a bad way&lt;/strong&gt; recently, and I’m worried they might divorce.&lt;/li&gt;
  &lt;li&gt;I have &lt;strong&gt;way too many&lt;/strong&gt; problems of my own to deal with right now - I can’t promise I’ll be able to help.&lt;/li&gt;
  &lt;li&gt;I can’t tell you &lt;strong&gt;the way forward&lt;/strong&gt;, you need to find it for yourself.&lt;/li&gt;
  &lt;li&gt;Her parents spoil her, and she always &lt;strong&gt;gets her own way&lt;/strong&gt;.&lt;/li&gt;
&lt;/ol&gt;

&lt;h1 id=&quot;dialogue&quot;&gt;Dialogue&lt;/h1&gt;

&lt;ol&gt;
  &lt;li&gt;John: You’ve all heard of a &lt;strong&gt;midlife crisis&lt;/strong&gt;, but what about a quarter-life crisis? Youth counsellor Helen Fern says more young people are experiencing one. Helen, what does a &lt;strong&gt;quarter-life crisis&lt;/strong&gt; look like?&lt;/li&gt;
  &lt;li&gt;Helen: Well it varies, John, but what we typically see is someone around 24, 25, recently graduated and usually in their first job. And things are tougher than they expected. Their finances are &lt;strong&gt;in a bad way&lt;/strong&gt; with the student loan and rent increases, their jobs are often a lot less creative or enjoyable than they’d hoped for, and then of course with no children yet and no sense of career, they might be feeling quite… well, lost. So it’s a time of facing up to reality-you thought you’d &lt;strong&gt;have your own way&lt;/strong&gt; with life, and now it’s not all happenging, or centainly not the way you imagined.&lt;/li&gt;
  &lt;li&gt;John: So there you are - you’re 25, these things are all getting &lt;strong&gt;in the way of&lt;/strong&gt; your dreams - how do you get through it?&lt;/li&gt;
  &lt;li&gt;Helen: So, unlike mid-life crises - which tend to come from looking back on our lives - with a quarter-life crisis people are often comparing themselves, whether that’s to TV characters, or our friends, or even our own ideas about what our twenties should have been like. And so &lt;strong&gt;the way forward&lt;/strong&gt;, is firstly to stop doing that, and start with your life as it is now. think about your true values - many young people want the freedom to travel, but if you’d rather focus on family and home, that’s fine too.&lt;/li&gt;
  &lt;li&gt;John: And then do it.&lt;/li&gt;
  &lt;li&gt;Helen: And do it -but start with small steps. If your goal is to see the world , you can begin by researching travel routes and saving a little money each week. But I will say, if you feel it’s time you made a big change - now’s the moment to do it. There are &lt;em&gt;way too many&lt;/em&gt; people out there with regrets about their twenties, and they usually regret the things they didn’t do, not the things they did.&lt;/li&gt;
&lt;/ol&gt;</content><author><name>Yawei</name></author><category term="English" /><summary type="html">Key vocabulary</summary></entry><entry><title type="html">kubernetes 教程（一）</title><link href="https://pfcstyle.github.io/2021/02/08/kubernetes-1-core-concept/" rel="alternate" type="text/html" title="kubernetes 教程（一）" /><published>2021-02-08T00:00:00+08:00</published><updated>2021-02-08T00:00:00+08:00</updated><id>https://pfcstyle.github.io/2021/02/08/kubernetes-1-core-concept</id><content type="html" xml:base="https://pfcstyle.github.io/2021/02/08/kubernetes-1-core-concept/">&lt;h1 id=&quot;kubernetes能提供什么&quot;&gt;Kubernetes能提供什么&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;服务发现和负载均衡&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;存储编排&lt;/p&gt;

    &lt;p&gt;Kubernetes 允许你自动挂载你选择的存储系统，例如本地存储、公共云提供商等。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;自动部署和回滚&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;自动完成装箱计算&lt;/p&gt;

    &lt;p&gt;Kubernetes 允许你指定每个容器所需 CPU 和内存（RAM）。&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;自我修复&lt;/p&gt;

    &lt;p&gt;Kubernetes 重新启动失败的容器、替换容器、杀死不响应用户定义的 运行状况检查的容器&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;密钥与配置管理&lt;/p&gt;

    &lt;p&gt;Kubernetes 允许你存储和管理敏感信息，例如密码、OAuth 令牌和 ssh 密钥。 你可以在不重建容器镜像的情况下部署和更新密钥和应用程序配置，也无需在堆栈配置中暴露密钥。&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;kubernetes集群部署图&quot;&gt;Kubernetes集群部署图&lt;/h1&gt;

&lt;p&gt;&lt;img src=&quot;/img/post/2021-02-08/k8s-cluster-deploy.jpg&quot; alt=&quot;k8s-cluster-deploy&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Pod：最小的调度分配单元，可包含一组容器和卷组成，同一个Pod的容器组共享同一个网络命名空间;&lt;/li&gt;
  &lt;li&gt;ReplicationController/ReplicateSet: 用于控制Pod副本数量，保证Pod始终运行;&lt;/li&gt;
  &lt;li&gt;StatefulSet：类似ReplicateSet，但StatefulSet提供Pod状态保持，在重新调度后保留他们的标识和状态，适合数据库等有状态应用场景;&lt;/li&gt;
  &lt;li&gt;DeamonSet： 保证在所有群集节点上运行一个Pod;&lt;/li&gt;
  &lt;li&gt;Service: 为一组功能相同的Pods提供单一不变的接入点，解耦Pods伸缩能力;&lt;/li&gt;
  &lt;li&gt;Deployment：类似ReplicationController/ReplicateSet， 增加滚动升降级策略和能力;&lt;/li&gt;
  &lt;li&gt;ConfigMap：配置选项，支持配置从Pod解耦分离;&lt;/li&gt;
  &lt;li&gt;Secret：类似ConfigMap，用于敏感数据保存;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;重要组件&quot;&gt;重要组件&lt;/h1&gt;

&lt;p&gt;集群中包含多个节点，分为主节点和工作节点。&lt;/p&gt;

&lt;p&gt;工作节点上用于负载应用的单元称为Pod,主节点用来管理工作节点和Pod.&lt;/p&gt;

&lt;h2 id=&quot;控制面板组件主节点&quot;&gt;控制面板组件（主节点）&lt;/h2&gt;
&lt;p&gt;对集群做出全局决策，以及检测和响应集群事件。每一个主节点同时也是node&lt;/p&gt;
&lt;h3 id=&quot;kube-apiserver&quot;&gt;kube-apiserver&lt;/h3&gt;
&lt;p&gt;Kubernetes的api服务，可以用来动态操作kubernetes，支持伸缩扩展。&lt;/p&gt;
&lt;h3 id=&quot;etcd&quot;&gt;etcd&lt;/h3&gt;
&lt;p&gt;保存Kubernetes集群数据的后台键值数据库&lt;/p&gt;
&lt;h3 id=&quot;kube-scheduler&quot;&gt;kube-scheduler&lt;/h3&gt;
&lt;p&gt;用来调度Pod及Pod的资源&lt;/p&gt;
&lt;h3 id=&quot;kube-controller-manager&quot;&gt;kube-controller-manager&lt;/h3&gt;
&lt;p&gt;每一个控制器应该是一个进程，但为了降低复杂性，他们被编译到一个应用中，并运行在一个进程中&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;节点控制器（Node Controller）: 负责在节点出现故障时进行通知和响应。&lt;/li&gt;
  &lt;li&gt;副本控制器（Replication Controller）: 负责为系统中的每个副本控制器对象维护正确数量的 Pod。&lt;/li&gt;
  &lt;li&gt;端点控制器（Endpoints Controller）: 填充端点(Endpoints)对象(即加入 Service 与 Pod)。&lt;/li&gt;
  &lt;li&gt;服务帐户和令牌控制器（Service Account &amp;amp; Token Controllers）: 为新的命名空间创建默认帐户和 API 访问令牌
    &lt;h3 id=&quot;cloud-controller-manager&quot;&gt;cloud-controller-manager&lt;/h3&gt;
    &lt;p&gt;用于链接管理云提供商的应用编程接口，本地集群不需要&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;节点控制器（Node Controller）: 用于在节点终止响应后检查云提供商以确定节点是否已被删除&lt;/li&gt;
  &lt;li&gt;路由控制器（Route Controller）: 用于在底层云基础架构中设置路由&lt;/li&gt;
  &lt;li&gt;服务控制器（Service Controller）: 用于创建、更新和删除云提供商负载均衡器&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;node组件&quot;&gt;Node组件&lt;/h2&gt;
&lt;h3 id=&quot;kubelet&quot;&gt;Kubelet&lt;/h3&gt;
&lt;p&gt;每个工作节点上的代理，通过接收PodSpecs来管理容器，并保证安全的运行在Pod中&lt;/p&gt;
&lt;h3 id=&quot;kube-proxy&quot;&gt;Kube-proxy&lt;/h3&gt;
&lt;p&gt;每个工作节点上运行的网络代理，维护节点网络规则&lt;/p&gt;
&lt;h3 id=&quot;container-runtime&quot;&gt;Container Runtime&lt;/h3&gt;
&lt;p&gt;负责运行容器的软件，如Docker、Containerd等任何实现Kubernetes CRI（容器运行环境接口）的容器软件&lt;/p&gt;

&lt;h2 id=&quot;插件&quot;&gt;插件&lt;/h2&gt;
&lt;p&gt;使用Kubernetes资源提供集群级别功能，其命名空间域属于kubu-system命名空间。常用插件：&lt;/p&gt;
&lt;h3 id=&quot;dns&quot;&gt;DNS&lt;/h3&gt;
&lt;p&gt;几乎所有Kubernetes集群都应该有集群DNS用于做域名服务&lt;/p&gt;
&lt;h3 id=&quot;仪表盘&quot;&gt;仪表盘&lt;/h3&gt;
&lt;p&gt;Kubernetes集群通用的、基于WEb的用户界面，可以管理集群&lt;/p&gt;
&lt;h3 id=&quot;容器资源监控&quot;&gt;容器资源监控&lt;/h3&gt;
&lt;h3 id=&quot;集群级别日志&quot;&gt;集群级别日志&lt;/h3&gt;</content><author><name>Yawei</name></author><category term="kubernetes" /><summary type="html">Kubernetes能提供什么 服务发现和负载均衡 存储编排</summary></entry><entry><title type="html">kubernetes 组件版本偏差策略</title><link href="https://pfcstyle.github.io/2021/02/08/kubernetes-components-version-strategy/" rel="alternate" type="text/html" title="kubernetes 组件版本偏差策略" /><published>2021-02-08T00:00:00+08:00</published><updated>2021-02-08T00:00:00+08:00</updated><id>https://pfcstyle.github.io/2021/02/08/kubernetes-components-version-strategy</id><content type="html" xml:base="https://pfcstyle.github.io/2021/02/08/kubernetes-components-version-strategy/">&lt;h1 id=&quot;版本偏差&quot;&gt;版本偏差&lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;多个 kube-apiserver 实例小版本号最多差1&lt;/li&gt;
  &lt;li&gt;kubelet 版本号不能高于 kube-apiserver，最多可以比 kube-apiserver 低两个小版本。&lt;/li&gt;
  &lt;li&gt;kube-controller-manager、kube-scheduler 和 cloud-controller-manager 版本不能高于 kube-apiserver 版本号&lt;/li&gt;
  &lt;li&gt;kubectl 可以比 kube-apiserver 高一个小版本，也可以低一个小版本。&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;组件升级顺序&quot;&gt;组件升级顺序&lt;/h1&gt;

&lt;ol&gt;
  &lt;li&gt;kube-apiserver&lt;/li&gt;
  &lt;li&gt;kube-controller-manager、kube-scheduler 和 cloud-controller-manager&lt;/li&gt;
  &lt;li&gt;Kubelet&lt;/li&gt;
  &lt;li&gt;Kube-proxy&lt;/li&gt;
&lt;/ol&gt;</content><author><name>Yawei</name></author><category term="kubernetes" /><summary type="html">版本偏差</summary></entry><entry><title type="html">kubernetes Daemonset</title><link href="https://pfcstyle.github.io/2021/02/08/kubernetes-daemonset/" rel="alternate" type="text/html" title="kubernetes Daemonset" /><published>2021-02-08T00:00:00+08:00</published><updated>2021-02-08T00:00:00+08:00</updated><id>https://pfcstyle.github.io/2021/02/08/kubernetes-daemonset</id><content type="html" xml:base="https://pfcstyle.github.io/2021/02/08/kubernetes-daemonset/">&lt;p&gt;守护进程集包含存储进程、日志收集进程、节点监控进程、和Pods管理（创建与回收）进程。&lt;/p&gt;

&lt;p&gt;DaemonSet可以只有一个，也可以根据不同的daemon划分为多个。这些进程都以Pods的形式运行&lt;/p&gt;

&lt;h2 id=&quot;spec&quot;&gt;Spec&lt;/h2&gt;
&lt;h3 id=&quot;必需字段&quot;&gt;必需字段&lt;/h3&gt;
&lt;p&gt;apiVersion, kind, metadata等通用字段&lt;/p&gt;

&lt;p&gt;template, 这是一个pod template,其配置与pod几乎完全一样，除了没有apiVersion和kind&lt;/p&gt;

&lt;p&gt;selector,1.8开始，必须指定来匹配template的label，否则会报错&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;matchLabels - 匹配template的label&lt;/li&gt;
  &lt;li&gt;matchExpressions - 通过指定key, values列表和关联key-value的操作，来构建更复杂的匹配&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;在指定的node上运行pods&quot;&gt;在指定的node上运行Pods&lt;/h3&gt;
&lt;p&gt;如果你指定一个.spec.template.spec.nodeSelector, 那么DaemonSet controller会在匹配的node上创建相关的Pods。如果指定spec.template.spec.affinity，那么会在亲和度匹配的node上创建Pods。如果什么都没有指定，那么将会在所有的node上创建。&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;s&quot;&gt;Spec Example&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;apiVersion&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;apps/v1&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;DaemonSet&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;fluentd-elasticsearch&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;namespace&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;kube-system&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;labels&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;k8s-app&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;fluentd-logging&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;selector&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;matchLabels&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;fluentd-elasticsearch&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;labels&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;fluentd-elasticsearch&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;tolerations&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;# this toleration is to have the daemonset runnable on master nodes&lt;/span&gt;
      &lt;span class=&quot;c1&quot;&gt;# remove it if your masters can't run pods&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;node-role.kubernetes.io/master&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;effect&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;NoSchedule&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;containers&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;fluentd-elasticsearch&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;quay.io/fluentd_elasticsearch/fluentd:v2.5.2&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;resources&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;limits&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;memory&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;200Mi&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;requests&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;cpu&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;100m&lt;/span&gt;
            &lt;span class=&quot;na&quot;&gt;memory&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;200Mi&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;volumeMounts&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;varlog&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;mountPath&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;/var/log&lt;/span&gt;
        &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;varlibdockercontainers&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;mountPath&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;/var/lib/docker/containers&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;readOnly&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;no&quot;&gt;true&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;terminationGracePeriodSeconds&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;30&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;volumes&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;varlog&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;hostPath&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;/var/log&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;varlibdockercontainers&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;hostPath&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
          &lt;span class=&quot;na&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;/var/lib/docker/containers&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;daemon-pods如何调度&quot;&gt;Daemon Pods如何调度&lt;/h2&gt;
&lt;p&gt;一般情况下，pods由Kubernetes调度器调度，但是Daemon pods被DaemonSet controller创建并调度。这会导致两个问题：&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;不一致的Pod表现：一般的Pods会以Pending的状态创建，但是DaemonSet pods不会&lt;/li&gt;
  &lt;li&gt;Pod preemption被默认的调度器控制。当抢占启用时，DaemonSet controller会做出调度决定，而不考虑pod的优先级和抢占逻辑
可以通过添加NodeAffinity项到DaemonSet Pods可以让其使用默认的调度器&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;nodeAffinity&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;requiredDuringSchedulingIgnoredDuringExecution&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;nodeSelectorTerms&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;matchFields&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;key&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;metadata.name&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;operator&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;In&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;target-host-name&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;另外，&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;node.kubernetes.io/unschedulable:NoSchedule&lt;/code&gt; &lt;strong&gt;toleration&lt;/strong&gt;会自动添加到DaemonSet Pods上，从而使默认的调度器忽略unschedulable的Nodes&lt;/p&gt;</content><author><name>Yawei</name></author><category term="kubernetes" /><summary type="html">守护进程集包含存储进程、日志收集进程、节点监控进程、和Pods管理（创建与回收）进程。</summary></entry><entry><title type="html">What’s the difference between @ObservedObject, @State, @Environment and @EnvironmentObject and @Binding?</title><link href="https://pfcstyle.github.io/2021/02/07/Diff-Of-SwiftUI-Property-Wrapper/" rel="alternate" type="text/html" title="What’s the difference between @ObservedObject, @State, @Environment and @EnvironmentObject and @Binding?" /><published>2021-02-07T00:00:00+08:00</published><updated>2021-02-07T00:00:00+08:00</updated><id>https://pfcstyle.github.io/2021/02/07/Diff-Of-SwiftUI-Property-Wrapper</id><content type="html" xml:base="https://pfcstyle.github.io/2021/02/07/Diff-Of-SwiftUI-Property-Wrapper/">&lt;h2 id=&quot;state&quot;&gt;@State&lt;/h2&gt;

&lt;p&gt;只在view内部发生改变和使用，且是较为简单的数据类型。@State将变量的内存管理交给了SwiftUI。所有的view都是结构体，是标量，这意味着它们无法修改（只能重新赋值）。因此，当我们使用@State时， 我们将变量的控制权交给了SwiftUI，只要view存在，他就会一直在内存中存在。当变量发生改变时，SwiftUI也会自动重新加载。&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-Swift&quot;&gt;struct ContentView: View {
    @State private var score = 0
    init() {
        score = 1
    }
    // more code
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;binding&quot;&gt;@Binding&lt;/h2&gt;

&lt;p&gt;当需要读写祖先view的@State或@ObservableObject(可能其中某个属性)的属性时&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-Swift&quot;&gt;
struct MyView: View {
    @State var isPresentingAlert = false

    var body: some View {
        Button(action: {
            self.isPresentingAlert = true
        }, label: {
            Text(&quot;Present an Alert&quot;)
        })
        .customAlert(isPresented: $isPresentingAlert) {
            CustomAlertView(title: Text(&quot;Alert!&quot;))
        }
    }}

struct CustomAlertView: View {
    let title: Text
    
    /// it needs read/write access to a State-
    /// wrapped property of an ancestor view
    @Binding var isBeingPresented: Bool
}
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&quot;language-Swfit&quot;&gt;
struct MyView: View {

    /// it needs to provide read/write access of 
    /// one of its properties to a descendant view
    @State var isPresentingAlert = false

    var body: some View {
        Button(action: {
            self.isPresentingAlert = true
        }, label: {
            Text(&quot;Present an Alert&quot;)
        })
        .alert(isPresented: $isPresentingAlert) {
            Alert(title: Text(&quot;Alert!&quot;))
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;observedobject&quot;&gt;@ObservedObject&lt;/h2&gt;

&lt;p&gt;适用于自定义类型，具备多个属性和方法，或者需要跨view使用的情况。大部分情况和@State相同，只是结构更复杂。需要实现ObservableObject protocol，这意味着其内部的属性可以被SwiftUI binding. 大多数情况，我们直接使用@Published来声明内部属性，当然也可以使用combine框架实现自定义的Publisher&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-Swift&quot;&gt;# 自己内部初始化
class MovieViewModel: ObservableObject {
    
    @Published var movies: [Movie] = [] // 1
    
    // more code
    
}


struct MoviesView: View {
    
    // 1
    @ObservedObject var viewModel = MovieViewModel()
    
    var body: some View {
        List(viewModel.movies) { movie in // 2
            HStack {
                VStack(alignment: .leading) {
                    Text(movie.title) // 3a
                        .font(.headline)
                    Text(movie.originalTitle) // 3b
                        .font(.subheadline)
                }
            }
        }
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;pre&gt;&lt;code class=&quot;language-Swift&quot;&gt;# 外部初始化（view init时）

struct MyView: View {

    /// it is dependent on an object that can
    /// easily be passed to its initializer
    @ObservedObject var dessertFetcher: DessertFetcher

    var body: some View {
        List(dessertFetcher.desserts) {
            Text($0.name)
        }.onAppear {
            self.dessertFetcher.fetch()
        }
    }}

extension UIViewController {

    func observedObjectExampleTwo() -&amp;gt; UIViewController {
        let fetcher = DessertFetcher(preferences: .init(toleratesMint: false))
        let view = ObservedObjectExampleTwo(dessertFetcher: fetcher)
        let host = UIHostingController(rootView: view)
        return host
    }
}
&lt;/code&gt;&lt;/pre&gt;
&lt;blockquote&gt;
  &lt;p&gt;Warning: When you use a custom publisher to announce that your object has changed, this must happen on the main thread.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;environmentobject&quot;&gt;@EnvironmentObject&lt;/h2&gt;

&lt;p&gt;ObservedObject当需要跨view共享或者是内嵌很深的view需要但又不适合自己初始化时，需要使用@EnvironmentObject。&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;@EnvironmentObject只支持1个实例&lt;/p&gt;
&lt;/blockquote&gt;

&lt;pre&gt;&lt;code class=&quot;language-Swift&quot;&gt;
struct SomeChildView: View {

    /// it would be too cumbersome to pass that 
    /// observed object through all the initializers 
    /// of all your view's ancestors
    @EnvironmentObject var veggieFetcher: VegetableFetcher

    var body: some View {
        List(veggieFetcher.veggies) {
            Text($0.name)
        }.onAppear {
            self.veggieFetcher.fetch()
        }
    }}

struct SomeParentView: View {
    var body: some View {
        SomeChildView()
    }}

struct SomeGrandparentView: View {
    var body: some View {
        SomeParentView()
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h2 id=&quot;environment&quot;&gt;@Environment&lt;/h2&gt;

&lt;p&gt;当view依赖的不能满足ObservableObject协议时，可能是以下几种情况：&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;依赖的是一个值类型&lt;/li&gt;
  &lt;li&gt;依赖项仅作为协议而不是具体类型公开&lt;/li&gt;
  &lt;li&gt;依赖是一个闭包&lt;/li&gt;
&lt;/ul&gt;

&lt;blockquote&gt;
  &lt;p&gt;@Environment 支持多实例
修改@Published的属性，不会引发view的重绘&lt;/p&gt;
&lt;/blockquote&gt;

&lt;pre&gt;&lt;code class=&quot;language-Swift&quot;&gt;
struct MyView: View {

    /// it is dependent on a type that cannot 
    /// conform to ObservableObject
    @Environment(\.theme) var theme: Theme

    var body: some View {
        Text(&quot;Me and my dad make models of clipper ships.&quot;)
            .foregroundColor(theme.foregroundColor)
            .background(theme.backgroundColor)
    }}

// MARK: - Dependencies

protocol Theme {
    var foregroundColor: Color { get }
    var backgroundColor: Color { get }
}

struct PinkTheme: Theme {
    var foregroundColor: Color { .white }
    var backgroundColor: Color { .pink }
}

// MARK: - Environment Boilerplate

struct ThemeKey: EnvironmentKey {
    static var defaultValue: Theme {
        return PinkTheme()
    }}

extension EnvironmentValues {
    var theme: Theme {
        get { return self[ThemeKey.self]  }
        set { self[ThemeKey.self] = newValue }
    }
}
&lt;/code&gt;&lt;/pre&gt;

&lt;h1 id=&quot;workaround-for-multiple-instances-of-an-environmentobject&quot;&gt;Workaround for Multiple Instances of an EnvironmentObject&lt;/h1&gt;

&lt;pre&gt;&lt;code class=&quot;language-Swift&quot;&gt;
struct MyView: View {

    @DistinctEnvironmentObject(\.posts) var postsService: Microservice
    @DistinctEnvironmentObject(\.users) var usersService: Microservice
    @DistinctEnvironmentObject(\.channels) var channelsService: Microservice

    var body: some View {
        Form {
            Section(header: Text(&quot;Posts&quot;)) {
                List(postsService.content, id: \.self) {
                    Text($0)
                }
            }
            Section(header: Text(&quot;Users&quot;)) {
                List(usersService.content, id: \.self) {
                    Text($0)
                }
            }
            Section(header: Text(&quot;Channels&quot;)) {
                List(channelsService.content, id: \.self) {
                    Text($0)
                }
            }
        }.onAppear(perform: fetchContent)
    }}

// MARK: - Property Wrapper To Make This All Work

@propertyWrapperstruct DistinctEnvironmentObject&amp;lt;Wrapped&amp;gt;: DynamicProperty where Wrapped : ObservableObject {
    var wrappedValue: Wrapped { _wrapped }
    @ObservedObject private var _wrapped: Wrapped

    init(_ keypath: KeyPath&amp;lt;EnvironmentValues, Wrapped&amp;gt;) {
        _wrapped = Environment&amp;lt;Wrapped&amp;gt;(keypath).wrappedValue
    }}

// MARK: - Wherever You Create Your View Hierarchy

MyView()
    .environment(\.posts, Microservice.posts)
    .environment(\.users, Microservice.users)
    .environment(\.channels, Microservice.channels)
&lt;/code&gt;&lt;/pre&gt;</content><author><name>Yawei</name></author><category term="iOS," /><category term="Swift," /><category term="SwiftUI" /><summary type="html">@State</summary></entry><entry><title type="html">Effective presentations</title><link href="https://pfcstyle.github.io/2021/02/06/Effective-Presentations/" rel="alternate" type="text/html" title="Effective presentations" /><published>2021-02-06T00:00:00+08:00</published><updated>2021-02-06T00:00:00+08:00</updated><id>https://pfcstyle.github.io/2021/02/06/Effective-Presentations</id><content type="html" xml:base="https://pfcstyle.github.io/2021/02/06/Effective-Presentations/">&lt;h1 id=&quot;progress&quot;&gt;progress&lt;/h1&gt;
&lt;h2 id=&quot;welcome-your-audience&quot;&gt;Welcome your audience&lt;/h2&gt;

&lt;p&gt;Good morning, everyone. Thanks for coming.&lt;/p&gt;

&lt;h2 id=&quot;tell-audience-some-interesting-abstract-information-or-statistic-to-get-peoples-attention&quot;&gt;Tell audience some interesting abstract information or statistic to get people’s attention.&lt;/h2&gt;

&lt;p&gt;I know that you’re all anxious to get more information about our acquisition of Sunset Computers.&lt;/p&gt;

&lt;h2 id=&quot;offer-people-a-map-of-your-presentation&quot;&gt;Offer people a ‘map’ of your presentation.&lt;/h2&gt;

&lt;p&gt;I’ll begin by giving a general update.&lt;/p&gt;

&lt;p&gt;Then, I’ll be discussing out acquisition of Smoot Hawley.&lt;/p&gt;
&lt;blockquote&gt;
  &lt;p&gt;-ing的形式听起来不太确定并且更加友好&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;And I’m going to finish by talking about new projects.&lt;/p&gt;

&lt;p&gt;However, I won’t have any new financial information.&lt;/p&gt;

&lt;h2 id=&quot;give-your-audience-the-rules-for-questions&quot;&gt;Give your audience the rules for questions.&lt;/h2&gt;

&lt;p&gt;During my presentation, if you have questions, please just ask them at any time(or until the end).&lt;/p&gt;

&lt;h2 id=&quot;transitioning-to-the-next-point&quot;&gt;Transitioning to the next point&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;As you know&lt;/li&gt;
  &lt;li&gt;However&lt;/li&gt;
  &lt;li&gt;… which brings us to my next point&lt;/li&gt;
  &lt;li&gt;Best of all  首先&lt;/li&gt;
  &lt;li&gt;Worse yet 最糟糕的是&lt;/li&gt;
  &lt;li&gt;Now, I’d like to move on to；现在，我想转到。。。&lt;/li&gt;
  &lt;li&gt;These pie charts show…&lt;/li&gt;
  &lt;li&gt;As you can clearly see … 你可以清楚看到&lt;/li&gt;
  &lt;li&gt;I’d like to draw your attentions to …&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;concluding-a-presentation&quot;&gt;Concluding a presentation&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;To summarize, we have a new CFO, sales are rising steadily and our merger with Smoot happens next month.&lt;/li&gt;
  &lt;li&gt;To conclusion, …&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;ending-a-presentation&quot;&gt;Ending a presentation&lt;/h2&gt;

&lt;p&gt;Next steps for us all are to come up with ideas for improving morale. Email them to me.
我们所有人下面要做的是想出提高士气的主意。把它们用邮件发送给我。
I’ll take questions now.&lt;/p&gt;

&lt;p&gt;Are there any questions?
Any more questions?
Any other questions?&lt;/p&gt;

&lt;p&gt;If you think of other questions, just send me an email.&lt;/p&gt;

&lt;p&gt;Do you have any updates, Tom?&lt;/p&gt;

&lt;p&gt;Thank you all for coming today.&lt;/p&gt;</content><author><name>Yawei</name></author><category term="English" /><summary type="html">progress Welcome your audience</summary></entry></feed>